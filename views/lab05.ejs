<h1
id="lab-packaging--distribution-of-a-python-application-with-dependencies">Lab:
Packaging &amp; Distribution of a Python Application with
Dependencies</h1>
<h2 id="objectives">Objectives</h2>
<ul>
<li>Understand how to organize a Python project for packaging and
distribution.</li>
<li>Learn to specify dependencies and entry points using
<code>setup.py</code>.</li>
<li>Build and install a Python package locally.</li>
<li>Run the packaged application from the command line.</li>
</ul>
<h2 id="real-world-scenario">Real-World Scenario</h2>
<p>Imagine you are developing a command-line tool that fetches data from
the GitHub API and processes it using NumPy. You want to share this tool
with your team or publish it for others to use. Packaging your
application with its dependencies ensures that anyone can install and
run it easily, regardless of their environment.</p>
<h2 id="step-1-organize-your-project-structure">Step 1: Organize Your
Project Structure</h2>
<p>Assume your project structure is as follows (from Lab 01):</p>
<pre><code>python_project/
├── src/
│   ├── __init__.py
│   └── main.py
├── tests/
│   ├── __init__.py
│   └── test_main.py
└── config/
    └── settings.py</code></pre>
<p>For packaging, move your main code into a package inside
<code>src/</code> (e.g., <code>src/my_app/</code>). You can keep tests
and config outside the package.</p>
<pre><code>python_project/
├── src/
│   └── my_app/
│       ├── __init__.py
│       └── main.py
├── tests/
│   ├── __init__.py
│   └── test_main.py
└── config/
    └── settings.py
├── setup.py
├── README.md</code></pre>
<h2 id="step-2-create-setuppy-with-dependencies">Step 2: Create
<code>setup.py</code> with Dependencies</h2>
<p>Place <code>setup.py</code> in the root
(<code>python_project/</code>):</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> setuptools <span class="im">import</span> setup, find_packages</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>setup(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">&#39;my_app&#39;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    version<span class="op">=</span><span class="st">&#39;0.1.0&#39;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    packages<span class="op">=</span>find_packages(where<span class="op">=</span><span class="st">&quot;src&quot;</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    package_dir<span class="op">=</span>{<span class="st">&quot;&quot;</span>: <span class="st">&quot;src&quot;</span>},</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    install_requires<span class="op">=</span>[</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;requests&gt;=2.25.0&#39;</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;numpy&gt;=1.21.0&#39;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    entry_points<span class="op">=</span>{</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;console_scripts&#39;</span>: [</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;my_app=my_app.main:main&#39;</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<h2 id="step-3-write-your-application-code-using-dependencies">Step 3:
Write Your Application Code Using Dependencies</h2>
<p><strong><code>src/my_app/main.py</code>:</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">&#39;https://api.github.com&#39;</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;GitHub API status:&quot;</span>, response.status_code)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    arr <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Numpy array:&quot;</span>, arr)</span></code></pre></div>
<h2 id="step-4-build-the-package">Step 4: Build the Package</h2>
<p>From the root directory:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> setup.py sdist bdist_wheel</span></code></pre></div>
<h2 id="step-5-install-the-package-locally">Step 5: Install the Package
Locally</h2>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install dist/my_app-0.1.0-py3-none-any.whl</span></code></pre></div>
<h2 id="step-6-run-the-application">Step 6: Run the Application</h2>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">my_app</span></span></code></pre></div>
<h2 id="step-7-upload-to-pypi-optional">Step 7: Upload to PyPI
(Optional)</h2>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install twine</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">twine</span> upload dist/<span class="pp">*</span></span></code></pre></div>
