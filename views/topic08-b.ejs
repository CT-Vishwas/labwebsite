<h1 id="lab-consuming-and-validating-json-data-from-randomuserme">Lab:
Consuming and Validating JSON Data from randomuser.me</h1>
<h2 id="objective">Objective</h2>
<p>Learn how to fetch, parse, and validate JSON data from the <a
href="https://randomuser.me/">randomuser.me</a> API using Pydantic
models or Python dataclasses.</p>
<h2 id="real-world-scenario">Real-World Scenario</h2>
<p>Imagine you are building a web dashboard for a recruitment agency.
The dashboard needs to display candidate profiles fetched from the <a
href="https://randomuser.me/">randomuser.me</a> API. To ensure data
integrity and prevent errors, you must validate the incoming JSON data
before displaying it. This lab will guide you through fetching candidate
data, parsing it into Python objects, and validating the fields (such as
name and email) using Pydantic models or dataclasses.</p>
<h2 id="steps">Steps</h2>
<h3 id="1-fetch-data-from-randomuserme">1. Fetch Data from
randomuser.me</h3>
<p>Use Python's <code>requests</code> library to get user data.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(<span class="st">&#39;https://randomuser.me/api/&#39;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> response.json()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span></code></pre></div>
<h3 id="2-define-a-pydantic-model-or-dataclass">2. Define a Pydantic
Model or Dataclass</h3>
<p>Use Pydantic for data validation and parsing, or use a dataclass for
simple structure.</p>
<h4 id="using-pydantic">Using Pydantic</h4>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, EmailStr</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Name(BaseModel):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    first: <span class="bu">str</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    last: <span class="bu">str</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User(BaseModel):</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    name: Name</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    email: EmailStr</span></code></pre></div>
<h4 id="using-dataclass">Using Dataclass</h4>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dataclasses <span class="im">import</span> dataclass</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">@dataclass</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Name:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    first: <span class="bu">str</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    last: <span class="bu">str</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">@dataclass</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User:</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    name: Name</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span></span></code></pre></div>
<h3 id="3-parse-and-validate-incoming-json-data">3. Parse and Validate
Incoming JSON Data</h3>
<h4 id="with-pydantic">With Pydantic</h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>user_data <span class="op">=</span> data[<span class="st">&#39;results&#39;</span>][<span class="dv">0</span>]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> User(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span>Name(<span class="op">**</span>user_data[<span class="st">&#39;name&#39;</span>]),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span>user_data[<span class="st">&#39;email&#39;</span>]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Name: </span><span class="sc">{</span>user<span class="sc">.</span>name<span class="sc">.</span>first<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>user<span class="sc">.</span>name<span class="sc">.</span>last<span class="sc">}</span><span class="ss">, Email: </span><span class="sc">{</span>user<span class="sc">.</span>email<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h4 id="with-dataclass">With Dataclass</h4>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>user_data <span class="op">=</span> data[<span class="st">&#39;results&#39;</span>][<span class="dv">0</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>name <span class="op">=</span> Name(<span class="op">**</span>user_data[<span class="st">&#39;name&#39;</span>])</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> User(name<span class="op">=</span>name, email<span class="op">=</span>user_data[<span class="st">&#39;email&#39;</span>])</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Name: </span><span class="sc">{</span>user<span class="sc">.</span>name<span class="sc">.</span>first<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>user<span class="sc">.</span>name<span class="sc">.</span>last<span class="sc">}</span><span class="ss">, Email: </span><span class="sc">{</span>user<span class="sc">.</span>email<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h3 id="4-validate-data">4. Validate Data</h3>
<p>Pydantic automatically validates types and required fields. For
dataclasses, add manual checks if needed.</p>
<h4 id="with-pydantic-1">With Pydantic</h4>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    user <span class="op">=</span> User(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>Name(<span class="op">**</span>user_data[<span class="st">&#39;name&#39;</span>]),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        email<span class="op">=</span>user_data[<span class="st">&#39;email&#39;</span>]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;User data is valid.&quot;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;User data is invalid:&quot;</span>, e)</span></code></pre></div>
<h4 id="with-dataclass-1">With Dataclass</h4>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> validate_user(user):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">bool</span>(user.name.first <span class="kw">and</span> user.name.last <span class="kw">and</span> user.email)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> validate_user(user):</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;User data is valid.&quot;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;User data is invalid.&quot;</span>)</span></code></pre></div>
<h2 id="example-output">Example Output</h2>
<pre><code>Name: Jane Doe, Email: jane.doe@example.com
User data is valid.</code></pre>
<h2 id="summary">Summary</h2>
<ul>
<li>Fetched JSON data from an API</li>
<li>Defined models using Pydantic or dataclasses</li>
<li>Parsed and validated relevant fields</li>
</ul>
